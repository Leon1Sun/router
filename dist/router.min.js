!function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.Router=function(){var t=function(){var t=void 0;return function(e){return e&&(t=e),t}}(),e=function e(r){if(i(this,e),t())return t();var o=n(1),s=new o(r);this.$when=function(t,e){return s.$$when(t,e)},this.$hash=s.tagName,t(this)};return e}()},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(2),s=n(3).RouteMap,c=n(3).RouteConfig,a=function(){var t=void 0;return function(e){return e&&(t=e),t}}(),u=function(){function t(e){var n=this;return i(this,t),a()?a():("undefined"!=typeof document?this.body=document.getElementsByTagName("BODY")[0]:this.body={},this.tagName=e,this.rootEle=o.getXPath(e),this.scriptManager={},this.routeMap=new s,this.routeMap.contains("")||this.routeMap.set("",new c(this.rootEle.innerHTML,"")),this.oldHash=location.hash.replace("#",""),function(){window.onhashchange=function(t){n.$$refreshView(location.hash)},console.debug("bind success")}(),this.$$refreshView(location.hash,!0),void a(this))}return r(t,[{key:"$$refreshView",value:function(t,e){t=t.replace("#","");var n=this;this.routeMap.contains(t)&&this.routeMap.getAsync(t,function(i){n.rootEle.innerHTML=i.template,n.oldHash=t,n.$$clearScript(t),n.$$evalScript(t),e||n.routeMap.getAsync(n.oldHash,function(t){t.template=n.rootEle.innerHTML})})}},{key:"$$clearScript",value:function(t){for(var e in this.scriptManager)if(e!=t){var n=document?null:document.getElementById("s_"+e);n&&this.body.removeChild(n)}}},{key:"$$evalScript",value:function(t){try{var e=this;this.routeMap.getAsync(t,function(n){var i=n.script||"",r=document.createElement("script");r.id="s_"+t,r.type="text/javascript",r.innerHTML=i,e.body.appendChild(r),e.scriptManager[t]=i})}catch(t){throw t}}},{key:"$$when",value:function(t,e){var n=new c(e.template,e.script,e.templateUrl,e.scriptUrl);this.routeMap.set(t,n),location.hash=="#"+t&&this.$$refreshView(location.hash,!0)}}]),t}();t.exports=u},function(t,e){"use strict";t.exports={getXPath:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rt-view";if(document.evaluate){if(t=document.evaluate("//*[@"+n+"]",document),e=t.iterateNext())return e;throw"can't find rt-view"}if(document.selectNodes){if(t=document.selectNodes("//*[@rt-view]"),!t||!t.length||t.length<=0)throw"can't find rt-view";return t[0]}}}},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n(4),s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";i(this,t),this.template=e||"",this.script=n||"",this.templateUrl=r,this.scriptUrl=o}return r(t,[{key:"async",value:function(t){console.log("async get res 1");var e=this;return""==this.template&&""!=this.templateUrl&&""!=this.script?o.getResourcePromise(this.templateUrl).then(function(n){e.template=n,t(e)}):""==this.script&&""!=this.scriptUrl&&""!=this.template?o.getResourcePromise(this.scriptUrl).then(function(n){e.script=n,t(e)}):""==this.script&&""!=this.scriptUrl&&""==this.template&&""!=this.templateUrl?Promise.all([o.getResourcePromise(this.templateUrl),o.getResourcePromise(this.scriptUrl)]).then(function(n){console.log(self),e.template=n[0],e.script=n[1],t(e)}):o.getEmptyPromise().then(function(){t(e)})}}]),t}(),c=function(){function t(){i(this,t),this.keys=[],this.configs=[]}return r(t,[{key:"getAsync",value:function(t,e){var n=this.keys.indexOf(t);if(n>=0){var i=this.configs[n];i.async(function(){console.log("async res success"),console.log(i),e(i)})}}},{key:"set",value:function(t,e){if(!e instanceof s)return console.warn("config is not instanceof RouteConfig"),!1;var n=this.keys.indexOf(t);n>0?this.configs[n]=e:(this.keys.push(t),this.configs.push(e))}},{key:"contains",value:function(t){return this.keys.indexOf(t)>=0}}]),t}();t.exports.RouteMap=c,t.exports.RouteConfig=s},function(t,e){"use strict";t.exports={getResourcePromise:function(t){return new Promise(function(e,n){var i,r=function(){return"undefined"!=typeof window&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveObject("Micrsorf.XMLHttp")}();r.onreadystatechange=function(){switch(r.readyState){case 3:console.log(3,"正在接受部分响应....."),i=r.responseText;break;case 4:r.status>=200&&r.status<300||304==r.status?e(i):n()}},r.open("get",t),r.send(null)})},getEmptyPromise:function(){return new Promise(function(t,e){t()})}}}]);