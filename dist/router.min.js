!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}window.Router=function(){var t=function(){var t=void 0;return function(e){return e&&(t=e),t}}(),e=new Map,o=function o(i,a){r(this,o);var s=void 0;if(a){if(t())return t();s=n(1)}else{if(e.has(i))return e.get(i);s=n(6)}var c=new s(i,a);this.$hash,Object.defineProperty(this,"$hash",{enumerable:!0,configurable:!0,get:function(){return c.oldHash},set:function(t){c.oldHash=t}}),this.$when=function(t,e){return c.$$when(t,e)},this.$list=c.routeMap.keys,Object.defineProperty(this,"$list",{enumerable:!0,configurable:!0,get:function(){return c.routeMap.keys}}),this.$getConfig=function(t){return c.routeMap.get(t)},a?t(this):e.has(i)||e.set(i,this)};return o}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(2),u=function(){var t=void 0;return function(e){return e&&(t=e),t}}(),l=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rt-view";if(r(this,e),u())return t=u(),o(i,t);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,!0));return i.oldHash=window.location.hash.replace("#!",""),function(){window.onhashchange=function(t){i.$$refreshView(window.location.hash)},console.debug("bind tag : "+n+" success")}(),i.$$refreshView(window.location.hash,!0),u(i),i}return i(e,t),a(e,[{key:"$$when",value:function(t,n){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"$$when",this).call(this,t,n),window.location.hash=="#!"+t&&this.$$refreshView(window.location.hash,!0)}}]),e}(c);t.exports=l},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),a=n(4),s=n(5),c=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rt-view",n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r(this,t);this.isAnchor=n,"undefined"!=typeof window.document?this.body=window.document.getElementsByTagName("BODY")[0]:this.body={},this.tagName=e,this.rootEle=i.getXPath(e),this.scriptManager={},this.routeMap=new a,this.routeMap.has("")||this.routeMap.set("",new s(this.rootEle.innerHTML,""))}return o(t,[{key:"$$refreshView",value:function(t,e,n){t=t.replace("#!","");var r=this;this.routeMap.has(t)&&this.routeMap.getAsync(t).then(function(e){r.rootEle.innerHTML=e.template,r.isAnchor&&(r.oldHash=t),r.$$clearScript(t),r.$$evalScript(t)}).then(function(){e||(!n&&r.oldHash&&(n=r.oldHash),r.routeMap.getAsync(n).then(function(t){t.template=r.rootEle.innerHTML}))})}},{key:"$$clearScript",value:function(t){for(var e in this.scriptManager)if(e!=t){var n=window.document?null:window.document.getElementById("s_"+this.tagName+"+"+t);n&&this.body.removeChild(n)}}},{key:"$$evalScript",value:function(t){var e=this;try{var n=this;this.routeMap.getAsync(t).then(function(r){var o=r.script||"",i=window.document.createElement("script");i.id="s_"+e.tagName+"+"+t,i.type="text/javascript",i.innerHTML=o,n.body.appendChild(i),n.scriptManager[t]=o})}catch(t){throw t}}},{key:"$$when",value:function(t,e){var n=new s(e.template,e.script,e.templateUrl,e.scriptUrl);this.routeMap.set(t,n)}}]),t}();t.exports=c},function(t,e){"use strict";t.exports={getResourcePromise:function(t){return new Promise(function(e,n){var r,o=function(){return"undefined"!=typeof window&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveObject("Micrsorf.XMLHttp")}();o.onreadystatechange=function(){switch(o.readyState){case 3:console.log(3,"正在接受部分响应....."),r=o.responseText;break;case 4:o.status>=200&&o.status<300||304==o.status?e(r):n()}},o.open("get",t),o.send(null)})},getEmptyPromise:function(){return new Promise(function(t,e){t()})},getXPath:function(){var t,e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rt-view";if(document.evaluate){if(t=document.evaluate("//*[@"+n+"]",document),e=t.iterateNext())return e;throw"can't find rt-view"}if(document.selectNodes){if(t=document.selectNodes("//*[@rt-view]"),!t||!t.length||t.length<=0)throw"can't find rt-view";return t[0]}}}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=n(5),i=function t(){r(this,t);var e=new Map;this.getAsync=function(t){var n=e.get(t);return n?n.async():void 0},this.get=function(t){return e.get(t)},this.set=function(t,n){return!n instanceof o?(console.warn("config is not instanceof RouteConfig"),!1):void e.set(t,n)},this.has=function(t){return e.has(t)}};t.exports=i},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(3),a=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r(this,t),this.template=e||"",this.script=n||"",this.templateUrl=o,this.scriptUrl=i}return o(t,[{key:"async",value:function(){var t=this;return""==this.template&&""!=this.templateUrl&&""!=this.script?i.getResourcePromise(this.templateUrl).then(function(e){return t.template=e,t}):""==this.script&&""!=this.scriptUrl&&""!=this.template?i.getResourcePromise(this.scriptUrl).then(function(e){return t.script=e,t}):""==this.script&&""!=this.scriptUrl&&""==this.template&&""!=this.templateUrl?Promise.all([i.getResourcePromise(this.templateUrl),i.getResourcePromise(this.scriptUrl)]).then(function(e){return console.log(self),t.template=e[0],t.script=e[1],console.log(t),t}):i.getEmptyPromise().then(function(){return t})}}]),t}();t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var o=Object.getOwnPropertyDescriptor(e,n);if(void 0===o){var i=Object.getPrototypeOf(e);return null===i?void 0:t(i,n,r)}if("value"in o)return o.value;var a=o.get;if(void 0!==a)return a.call(r)},c=n(2),u=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"rt-view";r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,!1)),i=n;return n.oldHash="",Object.defineProperty(n,"oldHash",{enumerable:!0,configurable:!0,set:function(t){t!=n.value&&(i.$$refreshView(t,!1,n.value||""),n.value=t)}}),n}return i(e,t),a(e,[{key:"$$when",value:function(t,n){s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"$$when",this).call(this,t,n),this.oldHash==t&&this.$$refreshView(t,!0)}}]),e}(c);t.exports=u}]);